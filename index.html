<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FeedFlow 2.0</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">
  <h1 class="mb-4 text-center">Generador de Ideas - FeedFlow 2.0</h1>

  <div class="card shadow-lg p-4">
    <div class="mb-4">
      <label class="form-label">Selecciona las redes sociales:</label>
      <div>
        <input type="checkbox" id="network-facebook" value="Facebook"> Facebook
        <input type="checkbox" id="network-instagram" value="Instagram"> Instagram
        <input type="checkbox" id="network-linkedin" value="LinkedIn"> LinkedIn
        <input type="checkbox" id="network-twitter" value="Twitter"> Twitter
        <!-- puedes agregar más redes si lo necesitas -->
      </div>
    </div>

    <div class="mb-4">
      <label class="form-label">Idea o palabra clave:</label>
      <input type="text" id="keyword" class="form-control" placeholder="Escribe aquí...">
    </div>

    <div class="mb-4">
      <label class="form-label">¿Qué efecto quieres generar?</label>
      <select id="desiredEffect" class="form-select">
        <option value="" selected disabled>Selecciona un efecto</option>
        <option value="Aspiración">Aspiración - Generar deseo de superación, logro o alcanzar un ideal.</option>
        <option value="Credibilidad/Autoridad">Credibilidad/Autoridad - Transmitir experiencia, conocimientos sólidos y respaldo profesional.</option>
        <option value="Curiosidad">Curiosidad - Despertar el interés, la intriga o el deseo de saber más.</option>
        <option value="Empatía">Empatía - Mostrar comprensión, conexión emocional o identificación con la audiencia.</option>
        <option value="Motivación">Motivación - Impulsar a la acción positiva, generar entusiasmo y energía.</option>
        <option value="Reflexión">Reflexión - Invitar a pensar, cuestionar o analizar un tema en profundidad.</option>
        <option value="Seguridad/Confianza">Seguridad/Confianza - Generar tranquilidad, certeza y sensación de respaldo.</option>
        <option value="Simplemente informar">Simplemente informar - Comunicar hechos o datos de manera objetiva y directa.</option>
      </select>
    </div>

    <div class="mb-4">
      <label class="form-label">Tipo de copy:</label>
      <select id="copyType" class="form-select">
        <option value="" selected disabled>Selecciona un tipo</option>
        <option value="Inspiracional">Inspiracional - Mensajes positivos que inspiran</option>
        <option value="Educativo">Educativo - Brinda aprendizaje o conocimientos</option>
        <option value="Entretenimiento">Entretenimiento - Divierte y atrae</option>
        <option value="Promocional">Promocional - Enfocado en ventas o productos</option>
        <option value="Urgencia">Urgencia - Incentivar acción rápida</option>
        <option value="Técnico o profesional">Técnico o profesional - Contenido especializado o profesional</option>
        <option value="Posicionamiento o branding">Posicionamiento o branding - Fortalece marca e identidad</option>
      </select>
    </div>

    <div class="d-grid">
      <button id="generateBtn" class="btn btn-primary btn-lg">Generar Ideas</button>
    </div>
  </div>

  <div id="results" class="mt-5"></div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-functions.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCScJA-UGs3WcBnfAm-6K94ybZ4bzBahz8",
    authDomain: "brain-storm-8f0d8.firebaseapp.com",
    projectId: "brain-storm-8f0d8",
    storageBucket: "brain-storm-8f0d8.appspot.com",
    messagingSenderId: "401208607043",
    appId: "1:401208607043:web:6f35fc81fdce7b3fbeaff6"
  };

  const app = initializeApp(firebaseConfig);
  const functions = getFunctions(app);
  const generateIdeas = httpsCallable(functions, 'generateIdeas');

  document.getElementById('generateBtn').addEventListener('click', async () => {
    const keyword = document.getElementById('keyword').value.trim();
    const desiredEffect = document.getElementById('desiredEffect').value;
    const copyType = document.getElementById('copyType').value;

    const selectedNetworks = [];
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
      if (cb.checked) selectedNetworks.push(cb.value);
    });

    if (!keyword || !desiredEffect || !copyType || selectedNetworks.length === 0) {
      alert('Por favor completa todos los campos.');
      return;
    }

    try {
      const result = await generateIdeas({
        keyword,
        desiredEffect,
        copyType,
        networks: selectedNetworks
      });

      document.getElementById('results').innerHTML = `
        <div class="alert alert-success">
          <h4>Ideas generadas:</h4>
          <pre>${JSON.stringify(result.data, null, 2)}</pre>
        </div>
      `;

    } catch (error) {
      console.error(error);
      alert('Error al generar las ideas. Consulta consola para detalles.');
    }
  });
</script>
</body>
</html>
